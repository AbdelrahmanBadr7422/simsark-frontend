import{a as U}from"./chunk-5WYRY4FN.js";import{a as T,b as u,c as A,d as M,e as q,g as P,h as V,i as L,j as N,k as D,l as I,m as k}from"./chunk-XOG22YQB.js";import"./chunk-XCEYEA5J.js";import{d as R,e as y}from"./chunk-74MSF4LX.js";import"./chunk-XHS7ECCB.js";import{La as E,T as v,Wa as d,Ya as m,a as w,b as B,bb as b,c as S,cb as i,db as n,eb as g,gb as F,hb as p,nb as o,pb as C,wa as a}from"./chunk-FJDYQ5PW.js";function G(){return e=>{let l=e.get("password")?.value,r=e.get("confirmPassword")?.value;return l&&r&&l!==r?{passwordMismatch:!0}:null}}function O(){return e=>{let l=["customer","seller"],r=e.value;return l.includes(r)?null:{RoleInvalid:!0}}}function z(e,l){e&1&&(i(0,"div"),o(1,"Email is required."),n())}function H(e,l){e&1&&(i(0,"div"),o(1,"Enter a valid email."),n())}function J(e,l){if(e&1&&(i(0,"div",9),d(1,z,2,0,"div"),d(2,H,2,0,"div"),n()),e&2){let r,t,s=p();a(),m(!((r=s.registerForm.get("email"))==null||r.errors==null)&&r.errors.required?1:-1),a(),m(!((t=s.registerForm.get("email"))==null||t.errors==null)&&t.errors.email?2:-1)}}function K(e,l){e&1&&(i(0,"div"),o(1,"Password is required."),n())}function Q(e,l){e&1&&(i(0,"div"),o(1,"Minimum 6 characters."),n())}function W(e,l){if(e&1&&(i(0,"div",9),d(1,K,2,0,"div"),d(2,Q,2,0,"div"),n()),e&2){let r,t,s=p();a(),m(!((r=s.registerForm.get("password"))==null||r.errors==null)&&r.errors.required?1:-1),a(),m(!((t=s.registerForm.get("password"))==null||t.errors==null)&&t.errors.minlength?2:-1)}}function X(e,l){e&1&&(i(0,"div"),o(1,"ConfirmPassword is required."),n())}function Y(e,l){e&1&&(i(0,"div"),o(1,"Passwords do not match."),n())}function Z(e,l){if(e&1&&(i(0,"div",9),d(1,X,2,0,"div"),d(2,Y,2,0,"div"),n()),e&2){let r,t=p();a(),m(!((r=t.registerForm.get("confirmPassword"))==null||r.errors==null)&&r.errors.required?1:-1),a(),m(t.registerForm.errors!=null&&t.registerForm.errors.passwordMismatch?2:-1)}}function $(e,l){e&1&&(i(0,"div"),o(1,"Last name is required."),n())}function ee(e,l){e&1&&(i(0,"div"),o(1,"Minimum 2 characters required."),n())}function te(e,l){if(e&1&&(i(0,"div",9),d(1,$,2,0,"div"),d(2,ee,2,0,"div"),n()),e&2){let r,t,s=p();a(),m(!((r=s.registerForm.get("fname"))==null||r.errors==null)&&r.errors.required?1:-1),a(),m(!((t=s.registerForm.get("fname"))==null||t.errors==null)&&t.errors.minlength?2:-1)}}function ie(e,l){e&1&&(i(0,"div"),o(1,"Last name is required."),n())}function re(e,l){e&1&&(i(0,"div"),o(1,"Minimum 2 characters required."),n())}function ne(e,l){if(e&1&&(i(0,"div",9),d(1,ie,2,0,"div"),d(2,re,2,0,"div"),n()),e&2){let r,t,s=p();a(),m(!((r=s.registerForm.get("lname"))==null||r.errors==null)&&r.errors.required?1:-1),a(),m(!((t=s.registerForm.get("lname"))==null||t.errors==null)&&t.errors.minlength?2:-1)}}function oe(e,l){e&1&&(i(0,"div"),o(1,"Role is required."),n())}function le(e,l){e&1&&(i(0,"div"),o(1,"Invalid role selected."),n())}function ae(e,l){if(e&1&&(i(0,"div",9),d(1,oe,2,0,"div"),d(2,le,2,0,"div"),n()),e&2){let r,t,s=p();a(),m(!((r=s.registerForm.get("role"))==null||r.errors==null)&&r.errors.required?1:-1),a(),m(!((t=s.registerForm.get("role"))==null||t.errors==null)&&t.errors.RoleInvalid?2:-1)}}function se(e,l){if(e&1&&(i(0,"div",25),o(1),n()),e&2){let r=p();a(),C(" ",r.serverErrorMsg," ")}}function de(e,l){if(e&1&&(i(0,"div",26),o(1),n()),e&2){let r=p();a(),C(" ",r.registerStatusMsg," ")}}var j=class e{_authService=v(U);fb=v(I);router=v(R);registerForm;registerStatusMsg="";isLoading=!1;serverErrorMsg="";ngOnInit(){this.registerForm=this.fb.group({fname:["",[u.required,u.minLength(3)]],lname:["",[u.required,u.minLength(3)]],email:["",[u.required,u.email]],password:["",[u.required,u.minLength(8)]],confirmPassword:["",u.required],role:["",[u.required,O()]]},{validators:G()})}onSubmit(){if(this.registerForm.invalid){this.registerForm.markAllAsTouched();return}this.isLoading=!0,this.serverErrorMsg="";let s=this.registerForm.value,{confirmPassword:l}=s,r=S(s,["confirmPassword"]),t=B(w({},r),{role:r.role});this._authService.singupService(t).subscribe({next:c=>{this.registerStatusMsg=c.message,c.token&&localStorage.setItem("authToken",c.token),c.data&&localStorage.setItem("userRole",c.data.role),this.isLoading=!1,this.router.navigate(["/explore"])},error:c=>{this.isLoading=!1,this.serverErrorMsg=c.message||"Something went wrong. Please try again."}})}get f(){return this.registerForm.controls}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=E({type:e,selectors:[["app-register"]],decls:52,vars:11,consts:[[1,"flex","flex-col","lg:flex-row","text-[#2B1B12]",2,"height","calc(100vh - 88px)"],[1,"lg:flex","w-full","lg:w-1/2","hidden","bg-cover","bg-center","relative","items-center",2,"background-image","url('../../../../assets/Landing/hero_image.png')"],[1,"w-full","lg:w-1/2","flex","items-center","justify-center","px-6","md:px-12"],[1,"w-full","max-w-md","py-10"],[1,"text-3xl","font-bold","mb-8","text-center"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"relative"],["type","email","id","email","formControlName","email","placeholder","",1,"peer","w-full","bg-transparent","border-b-2","border-[#B99F8A]","py-3","text-[#2B1B12]","placeholder-transparent","focus:outline-none","focus:border-[#2B1B12]"],["for","email",1,"absolute","left-0","top-3","text-[#6B5B4D]","text-sm","transition-all","duration-200","ease-in-out","peer-placeholder-shown:top-3","peer-placeholder-shown:text-base","peer-placeholder-shown:text-[#8C7A6B]","peer-focus:top-0","peer-focus:text-xs","peer-focus:text-[#2B1B12]","peer-not-placeholder-shown:top-0","peer-not-placeholder-shown:text-xs","peer-not-placeholder-shown:text-[#2B1B12]"],[1,"text-red-600","text-sm","mt-1"],["type","password","id","password","formControlName","password","placeholder","",1,"peer","w-full","bg-transparent","border-b-2","border-[#B99F8A]","py-3","text-[#2B1B12]","placeholder-transparent","focus:outline-none","focus:border-[#2B1B12]"],["for","password",1,"absolute","left-0","top-3","text-[#6B5B4D]","text-sm","transition-all","duration-200","ease-in-out","peer-placeholder-shown:top-3","peer-placeholder-shown:text-base","peer-placeholder-shown:text-[#8C7A6B]","peer-focus:top-0","peer-focus:text-xs","peer-focus:text-[#2B1B12]","peer-not-placeholder-shown:top-0","peer-not-placeholder-shown:text-xs","peer-not-placeholder-shown:text-[#2B1B12]"],["type","password","id","confirmPassword","formControlName","confirmPassword","placeholder","",1,"peer","w-full","bg-transparent","border-b-2","border-[#B99F8A]","py-3","text-[#2B1B12]","placeholder-transparent","focus:outline-none","focus:border-[#2B1B12]"],["for","confirmPassword",1,"absolute","left-0","top-3","text-[#6B5B4D]","text-sm","transition-all","duration-200","ease-in-out","peer-placeholder-shown:top-3","peer-placeholder-shown:text-base","peer-placeholder-shown:text-[#8C7A6B]","peer-focus:top-0","peer-focus:text-xs","peer-focus:text-[#2B1B12]","peer-not-placeholder-shown:top-0","peer-not-placeholder-shown:text-xs","peer-not-placeholder-shown:text-[#2B1B12]"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["type","text","id","fname","formControlName","fname","placeholder","",1,"peer","w-full","bg-transparent","border-b-2","border-[#B99F8A]","py-3","text-[#2B1B12]","placeholder-transparent","focus:outline-none","focus:border-[#2B1B12]"],["for","fname",1,"absolute","left-0","top-3","text-[#6B5B4D]","text-sm","transition-all","duration-200","ease-in-out","peer-placeholder-shown:top-3","peer-placeholder-shown:text-base","peer-placeholder-shown:text-[#8C7A6B]","peer-focus:top-0","peer-focus:text-xs","peer-focus:text-[#2B1B12]","peer-not-placeholder-shown:top-0","peer-not-placeholder-shown:text-xs","peer-not-placeholder-shown:text-[#2B1B12]"],["type","text","id","lname","formControlName","lname","placeholder","",1,"peer","w-full","bg-transparent","border-b-2","border-[#B99F8A]","py-3","text-[#2B1B12]","placeholder-transparent","focus:outline-none","focus:border-[#2B1B12]"],["for","lname",1,"absolute","left-0","top-3","text-[#6B5B4D]","text-sm","transition-all","duration-200","ease-in-out","peer-placeholder-shown:top-3","peer-placeholder-shown:text-base","peer-placeholder-shown:text-[#8C7A6B]","peer-focus:top-0","peer-focus:text-xs","peer-focus:text-[#2B1B12]","peer-not-placeholder-shown:top-0","peer-not-placeholder-shown:text-xs","peer-not-placeholder-shown:text-[#2B1B12]"],["for","role",1,"block","mb-2","text-[#6B5B4D]","text-sm"],["id","role","formControlName","role",1,"block","w-full","bg-transparent","border-b-2","border-[#B99F8A]","text-[#2B1B12]","py-3","focus:outline-none","focus:border-[#2B1B12]"],["value","","disabled","","selected","","hidden",""],["value","seller"],["value","customer"],["type","submit",1,"w-full","bg-[#2B1B12]","hover:bg-[#3b261a]","transition-all","text-white","font-semibold","py-3","rounded-lg","disabled:opacity-50",3,"disabled"],[1,"text-red-600","text-center","mt-2"],[1,"text-green-600","text-center","mt-2"],[1,"mt-6","text-center","text-[#4A3B32]","text-sm"],["routerLink","/auth/login",1,"text-[#2B1B12]","hover:underline","font-semibold"]],template:function(r,t){if(r&1&&(i(0,"section",0),g(1,"div",1),i(2,"div",2)(3,"div",3)(4,"h2",4),o(5,"Create an Account"),n(),i(6,"form",5),F("ngSubmit",function(){return t.onSubmit()}),i(7,"div",6),g(8,"input",7),i(9,"label",8),o(10," Email address "),n(),d(11,J,3,2,"div",9),n(),i(12,"div",6),g(13,"input",10),i(14,"label",11),o(15," Password "),n(),d(16,W,3,2,"div",9),n(),i(17,"div",6),g(18,"input",12),i(19,"label",13),o(20," Confirm Password "),n(),d(21,Z,3,2,"div",9),n(),i(22,"div",14)(23,"div",6),g(24,"input",15),i(25,"label",16),o(26," First name "),n(),d(27,te,3,2,"div",9),n(),i(28,"div",6),g(29,"input",17),i(30,"label",18),o(31," Last name "),n(),d(32,ne,3,2,"div",9),n()(),i(33,"div",6)(34,"label",19),o(35,"Select Role"),n(),i(36,"select",20)(37,"option",21),o(38,"Select Role"),n(),i(39,"option",22),o(40,"Seller"),n(),i(41,"option",23),o(42,"Customer"),n()()(),d(43,ae,3,2,"div",9),i(44,"button",24),o(45),n(),d(46,se,2,1,"div",25),d(47,de,2,1,"div",26),n(),i(48,"div",27),o(49," Already have an account? "),i(50,"a",28),o(51,"Login here"),n()()()()()),r&2){let s,c,f,x,_,h;a(6),b("formGroup",t.registerForm),a(5),m((s=t.registerForm.get("email"))!=null&&s.touched&&((s=t.registerForm.get("email"))!=null&&s.invalid)?11:-1),a(5),m((c=t.registerForm.get("password"))!=null&&c.touched&&((c=t.registerForm.get("password"))!=null&&c.invalid)?16:-1),a(5),m((f=t.registerForm.get("confirmPassword"))!=null&&f.touched&&((f=t.registerForm.get("confirmPassword"))!=null&&f.invalid||t.registerForm.errors!=null&&t.registerForm.errors.passwordMismatch)?21:-1),a(6),m((x=t.registerForm.get("fname"))!=null&&x.touched&&((x=t.registerForm.get("fname"))!=null&&x.invalid)?27:-1),a(5),m((_=t.registerForm.get("lname"))!=null&&_.touched&&((_=t.registerForm.get("lname"))!=null&&_.invalid)?32:-1),a(11),m((h=t.registerForm.get("role"))!=null&&h.touched&&((h=t.registerForm.get("role"))!=null&&h.invalid)?43:-1),a(),b("disabled",t.registerForm.invalid||t.isLoading),a(),C(" ",t.isLoading?"Registering...":"Register"," "),a(),m(t.serverErrorMsg?46:-1),a(),m(t.registerStatusMsg&&!t.serverErrorMsg?47:-1)}},dependencies:[k,q,N,D,T,L,A,M,P,V,y],encapsulation:2})};export{j as Register};
