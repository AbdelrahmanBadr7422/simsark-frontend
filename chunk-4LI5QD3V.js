import{a as N}from"./chunk-RLDTOJEW.js";import"./chunk-XCEYEA5J.js";import{e as I}from"./chunk-74MSF4LX.js";import"./chunk-XHS7ECCB.js";import{$a as y,Db as A,La as C,T as B,Wa as v,Y as x,Ya as h,Z as f,_a as M,ab as _,bb as u,cb as e,db as i,eb as m,fb as T,ga as c,gb as b,hb as E,lb as w,nb as o,pb as g,rb as P,ua as S,ub as L,vb as D,wa as l}from"./chunk-FJDYQ5PW.js";var k=()=>[1,2,3,4,5,6],F=n=>["/post",n],$=(n,r)=>r._id;function j(n,r){n&1&&(e(0,"div",25),m(1,"div",26),e(2,"div",27),m(3,"div",28)(4,"div",29)(5,"div",30)(6,"div",31),i()())}function O(n,r){n&1&&(e(0,"div",22),y(1,j,7,0,"div",25,M),i()),n&2&&(l(),_(L(0,k)))}function z(n,r){if(n&1&&(e(0,"p",23),o(1),i()),n&2){let t=E();l(),g(" ",t.serverErrorMsg()," ")}}function G(n,r){if(n&1&&(e(0,"a",32)(1,"div",33),m(2,"img",34),e(3,"div",35),o(4),i(),e(5,"div",36),o(6),i()(),e(7,"div",37)(8,"h3",38),o(9),i(),e(10,"p",39),o(11),i(),e(12,"p",40),o(13),i()()()),n&2){let t=r.$implicit;u("routerLink",D(9,F,t._id)),l(2),u("src",t.images[0]||"assets/placeholders/house-placeholder.jpg",S),l(2),g(" ",t.propertyType," "),l(2),g(" $",t.price," "),l(3),g(" ",t.title," "),l(2),P(" ",t.area," m\xB2 \u2022 ",t.rooms," rooms \u2022 ",t.bathrooms," baths "),l(2),g(" ",t.description||"Beautiful modern property in a prime location."," ")}}function W(n,r){if(n&1&&(e(0,"div",22),y(1,G,14,11,"a",32,$),i()),n&2){let t=E();l(),_(t.filteredPosts())}}function U(n,r){n&1&&(e(0,"p",24),o(1,"No matching properties found."),i())}var R=class n{_postService=B(N);postsList=c([]);isLoading=c(!0);serverErrorMsg=c("");location=c("");propertyType=c("");priceRange=c("");filteredPosts=A(()=>{let r=this.location().toLowerCase(),t=this.propertyType(),a=this.priceRange();return this.postsList().filter(s=>{let d=!r||s.title?.toLowerCase().includes(r),p=!t||s.propertyType===t,V=this.priceMatches(s.price,a);return d&&p&&V})});ngOnInit(){this.loadPosts()}loadPosts(){this.isLoading.set(!0),this.serverErrorMsg.set(""),this._postService.getAllPosts().subscribe({next:r=>{this.isLoading.set(!1),r.data&&r.success?this.postsList.set(r.data):this.serverErrorMsg.set("No posts found.")},error:()=>{this.isLoading.set(!1),this.serverErrorMsg.set("Failed to load posts. Please try again.")}})}priceMatches(r,t){if(!t)return!0;if(t==="5000+")return r>5e3;let[a,s]=t.split("-").map(d=>+d);return r>=a&&r<=s}resetFilters(){this.location.set(""),this.propertyType.set(""),this.priceRange.set("")}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=C({type:n,selectors:[["app-explore"]],decls:42,vars:7,consts:[["propType",""],["propPrice",""],[1,"flex","justify-center","mt-20","z-10","relative","px-4"],[1,"bg-gradient-to-r","from-[#EADFD5]","to-[#DCC8B9]","shadow-2xl","rounded-3xl","w-full","max-w-6xl","p-6","md:p-8","flex","flex-col","md:flex-row","items-center","gap-4","md:gap-6","backdrop-blur-md","border","border-[#CBB6A6]/40"],[1,"relative","flex-1","w-full"],[1,"fa-solid","fa-location-dot","absolute","left-4","top-3","text-[#8C7A6B]"],["type","text","placeholder","Search by city, neighborhood, or area",1,"w-full","bg-white/90","pl-10","pr-4","py-3","rounded-xl","border","border-[#CBB6A6]","outline-none","focus:ring-2","focus:ring-[#2B1B12]","placeholder:text-gray-400","text-[#2B1B12]","shadow-sm",3,"input","value"],[1,"fa-solid","fa-building","absolute","left-4","top-3","text-[#8C7A6B]"],[1,"w-full","bg-white/90","pl-10","pr-4","py-3","rounded-xl","border","border-[#CBB6A6]","outline-none","focus:ring-2","focus:ring-[#2B1B12]","text-[#2B1B12]","shadow-sm",3,"change","value"],["value","","disabled","","selected",""],["value","Apartment"],["value","Villa"],["value","Studio"],["value","Land"],[1,"fa-solid","fa-dollar-sign","absolute","left-4","top-3","text-[#8C7A6B]"],["value","0-1000"],["value","1000-3000"],["value","3000-5000"],["value","5000+"],[1,"bg-[#2B1B12]","text-white","font-medium","px-8","py-3","rounded-xl","hover:bg-[#3B261A]","transition-all","duration-300","shadow-md","w-full","md:w-auto",3,"click"],[1,"container","mx-auto","px-4"],[1,"text-[#2B1B12]","font-extrabold","text-3xl","md:text-4xl","text-center","my-14","border-b-4","border-[#8C7A6B]","inline-block","mx-auto","pb-2"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-8","place-items-center"],[1,"text-center","text-red-500","text-lg","my-10"],[1,"text-center","text-gray-500","text-lg","my-10"],[1,"bg-white","rounded-3xl","shadow-md","w-full","max-w-sm","animate-pulse","overflow-hidden"],[1,"h-56","w-full","bg-gray-300"],[1,"p-5","space-y-3"],[1,"h-6","bg-gray-300","rounded","w-3/4"],[1,"h-4","bg-gray-200","rounded","w-1/2"],[1,"h-4","bg-gray-200","rounded","w-2/3"],[1,"h-5","bg-gray-300","rounded","w-1/4"],[1,"group","relative","bg-white","rounded-3xl","overflow-hidden","shadow-lg","hover:shadow-2xl","transition-all","duration-300","max-w-sm","w-full",3,"routerLink"],[1,"relative"],["alt","Property Image",1,"h-56","w-full","object-cover","transition-transform","duration-500","group-hover:scale-105",3,"src"],[1,"absolute","top-3","left-3","bg-[#2B1B12]/80","text-white","text-xs","font-medium","px-3","py-1","rounded-full"],[1,"absolute","bottom-3","right-3","bg-[#DCC8B9]/90","text-[#2B1B12]","font-semibold","px-3","py-1","rounded-full","text-sm"],[1,"p-5","space-y-2"],[1,"text-[#2B1B12]","text-xl","font-semibold","truncate"],[1,"text-[#6B5B4D]","text-sm"],[1,"text-[#8C7A6B]","text-sm","truncate"]],template:function(t,a){if(t&1){let s=T();e(0,"section",2)(1,"div",3)(2,"div",4),m(3,"i",5),e(4,"input",6),b("input",function(p){return x(s),f(a.location.set(p.target.value))}),i()(),e(5,"div",4),m(6,"i",7),e(7,"select",8,0),b("change",function(){x(s);let p=w(8);return f(a.propertyType.set(p.value))}),e(9,"option",9),o(10,"Property Type"),i(),e(11,"option",10),o(12,"Apartment"),i(),e(13,"option",11),o(14,"Villa"),i(),e(15,"option",12),o(16,"Studio"),i(),e(17,"option",13),o(18,"Land"),i()()(),e(19,"div",4),m(20,"i",14),e(21,"select",8,1),b("change",function(){x(s);let p=w(22);return f(a.priceRange.set(p.value))}),e(23,"option",9),o(24,"Price Range"),i(),e(25,"option",15),o(26,"$0 - $1,000"),i(),e(27,"option",16),o(28,"$1,000 - $3,000"),i(),e(29,"option",17),o(30,"$3,000 - $5,000"),i(),e(31,"option",18),o(32,"$5,000+"),i()()(),e(33,"button",19),b("click",function(){return x(s),f(a.resetFilters())}),o(34," Reset "),i()()(),e(35,"section",20)(36,"h2",21),o(37," Explore Properties "),i(),v(38,O,3,1,"div",22),v(39,z,2,1,"p",23),v(40,W,3,0,"div",22),v(41,U,2,0,"p",24),i()}t&2&&(l(4),u("value",a.location()),l(3),u("value",a.propertyType()),l(14),u("value",a.priceRange()),l(17),h(a.isLoading()?38:-1),l(),h(a.serverErrorMsg()&&!a.isLoading()?39:-1),l(),h(!a.isLoading()&&a.filteredPosts().length>0?40:-1),l(),h(!a.isLoading()&&a.filteredPosts().length===0&&!a.serverErrorMsg()?41:-1))},dependencies:[I],encapsulation:2})};export{R as Explore};
