import{a as V}from"./chunk-5WYRY4FN.js";import"./chunk-XCEYEA5J.js";import"./chunk-XHS7ECCB.js";import{$a as k,La as y,Pa as C,T as b,Tb as M,Va as P,Wa as u,Xb as D,Y as p,Ya as g,Z as m,Za as E,_ as v,ab as S,bb as c,cb as a,db as n,eb as _,fb as x,gb as f,hb as s,lb as T,mb as I,nb as l,pb as w,qb as F,sb as h,wa as o}from"./chunk-FJDYQ5PW.js";function R(t,r){t&1&&(v(),a(0,"svg",16),_(1,"path",17)(2,"circle",18),n())}function O(t,r){t&1&&(v(),a(0,"svg",16),_(1,"path",19),n())}function j(t,r){if(t&1){let e=x();a(0,"button",20),f("click",function(){p(e);let d=s(3);return m(d.toggleResetBtn())}),l(1," Reset Password? "),n()}}function U(t,r){if(t&1){let e=x();a(0,"div",14)(1,"button",21),f("click",function(){p(e),s();let d=T(3),B=s(2);return m(B.saveNewPassword(d.value))}),l(2," Save "),n(),a(3,"button",22),f("click",function(){p(e);let d=s(3);return m(d.cancelReset())}),l(4," Cancel "),n()()}}function $(t,r){if(t&1&&(a(0,"p",15),l(1),n()),t&2){let e=s(3);o(),w(" ",e.passwordError," ")}}function A(t,r){if(t&1){let e=x();a(0,"div",8)(1,"div",9),_(2,"input",10,0),a(4,"button",11),f("click",function(){p(e);let d=s(2);return m(d.toggleShowPassword())}),C(5,R,3,0,"svg",12)(6,O,2,0,"svg",12),n()(),u(7,j,2,0,"button",13)(8,U,5,0,"div",14),n(),u(9,$,2,1,"p",15)}if(t&2){let e=s().$implicit,i=s();o(2),c("id",h(e.key))("type",i.showPassword?"text":"password")("placeholder",i.resetToggle?"Enter new password":"")("readonly",i.resetToggle)("disabled",i.resetToggle),o(2),P("aria-label",i.showPassword?"Hide password":"Show password"),o(),c("ngIf",!i.showPassword),o(),c("ngIf",i.showPassword),o(),g(i.resetToggle?7:8),o(2),g(i.passwordError?9:-1)}}function G(t,r){if(t&1&&_(0,"input",7),t&2){let e=s().$implicit;c("id",h(e.key))("value",e.value)}}function z(t,r){if(t&1&&(a(0,"div",4)(1,"label",6),l(2),n(),u(3,A,10,11)(4,G,1,3,"input",7),n()),t&2){let e=r.$implicit;o(),c("for",h(e.key)),o(),w(" ",e.label," "),o(),g(e.key==="password"?3:4)}}function H(t,r){if(t&1&&(a(0,"div",23),l(1),n()),t&2){let e=s();I("bg-green-100",!e.resetError)("text-green-800",!e.resetError)("bg-red-100",e.resetError)("text-red-800",e.resetError),o(),w(" ",e.resetPassMsg," ")}}var N=class t{_authService=b(V);userData={};fields=[];resetToggle=!0;passwordError="";resetPassMsg="";resetError=!1;showPassword=!1;ngOnInit(){this.loadUserData()}loadUserData(){let r=localStorage.getItem("userData");if(r)try{this.userData=JSON.parse(r),this.fields=[{key:"fname",label:"First Name",value:this.userData.fname||""},{key:"lname",label:"Last Name",value:this.userData.lname||""},{key:"email",label:"Email",value:this.userData.email||""},{key:"password",label:"Password",value:""}]}catch(e){console.error("Error parsing user data from localStorage",e)}else console.warn("No user data found in localStorage")}toggleResetBtn(){this.resetToggle=!this.resetToggle,this.passwordError="",this.resetPassMsg=""}toggleShowPassword(){this.showPassword=!this.showPassword}saveNewPassword(r){if(!r||r.trim().length<8){this.passwordError="Password must be at least 8 characters.";return}this.passwordError="",this.resetError=!1,this.resetPassMsg="",this._authService.changePassService(r).subscribe({next:e=>{this.resetPassMsg=e.message||"Password updated successfully!",this.resetError=!1,this.resetToggle=!0},error:e=>{console.error("Error updating password:",e),this.passwordError=e?.error?.message||"Failed to update password.",this.resetError=!0}})}cancelReset(){this.resetToggle=!0,this.passwordError="",this.resetPassMsg=""}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=y({type:t,selectors:[["app-profile"]],decls:7,vars:3,consts:[["passInput",""],[1,"max-w-3xl","mx-auto","p-8","bg-white","shadow-lg","rounded-2xl","transition-all","duration-500","hover:shadow-xl"],[1,"text-3xl","font-extrabold","text-gray-800","mb-10","text-center","border-b","pb-4"],[1,"space-y-6"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:gap-4","bg-gray-50","rounded-xl","p-4","hover:bg-gray-100","transition-colors"],[1,"mt-8","p-4","rounded-lg","text-sm","font-medium","text-center","animate-fadeIn",3,"bg-green-100","text-green-800","bg-red-100","text-red-800"],[1,"block","text-sm","font-semibold","text-gray-700","sm:w-40",3,"for"],["type","text","readonly","","disabled","",1,"flex-1","p-2.5","bg-gray-100","border","border-gray-300","rounded-lg","text-gray-700","cursor-not-allowed",3,"id","value"],[1,"flex","flex-col","sm:flex-row","items-start","sm:items-center","gap-3","w-full"],[1,"relative","flex-1","w-full"],[1,"w-full","p-2.5","pr-10","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:outline-none","text-gray-800","transition-all","duration-200","disabled:bg-gray-100",3,"id","type","placeholder","readonly","disabled"],["type","button",1,"absolute","right-3","top-1/2","-translate-y-1/2","text-gray-500","hover:text-gray-700","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","2","stroke","currentColor","class","w-5 h-5",4,"ngIf"],["type","button",1,"text-blue-600","font-medium","hover:text-blue-800","transition-colors"],[1,"flex","gap-2"],[1,"text-sm","text-red-600","mt-2","ml-1","animate-fadeIn"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","2","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],["cx","12","cy","12","r","3"],["stroke-linecap","round","stroke-linejoin","round","d","M3 3l18 18M10.477 10.477A3 3 0 0112 9c1.657 0 3 1.343 3 3 0 .523-.134 1.012-.372 1.44M6.938 6.938C4.677 8.447 3.2 10.639 2.458 12c1.274 4.057 5.064 7 9.542 7 1.696 0 3.299-.39 4.73-1.083"],["type","button",1,"text-blue-600","font-medium","hover:text-blue-800","transition-colors",3,"click"],["type","button",1,"px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","active:scale-95","transition-all","duration-200","shadow-sm",3,"click"],["type","button",1,"px-4","py-2","bg-gray-200","text-gray-800","rounded-lg","hover:bg-gray-300","active:scale-95","transition-all","duration-200",3,"click"],[1,"mt-8","p-4","rounded-lg","text-sm","font-medium","text-center","animate-fadeIn"]],template:function(e,i){e&1&&(a(0,"section",1)(1,"h2",2),l(2),n(),a(3,"div",3),k(4,z,5,4,"div",4,E),n(),u(6,H,2,9,"div",5),n()),e&2&&(o(2),F(" ",i.userData.fname," ",i.userData.lname,"'s Profile "),o(2),S(i.fields),o(2),g(i.resetPassMsg?6:-1))},dependencies:[D,M],encapsulation:2})};export{N as Profile};
