import{a as N}from"./chunk-5WYRY4FN.js";import{a as M,b as g,c as k,d as E,e as R,g as F,h as T,l as A,m as L}from"./chunk-XOG22YQB.js";import"./chunk-XCEYEA5J.js";import{b as y,d as S}from"./chunk-74MSF4LX.js";import"./chunk-XHS7ECCB.js";import{$ as w,La as b,Pa as P,T as u,Tb as C,Wa as m,Xb as B,Ya as c,_ as f,bb as p,cb as i,db as s,eb as l,gb as v,hb as h,nb as a,pb as x,wa as n}from"./chunk-FJDYQ5PW.js";function V(e,r){e&1&&(f(),l(0,"path",20))}function G(e,r){e&1&&(f(),l(0,"path",21))}function j(e,r){e&1&&(i(0,"div",12)(1,"div"),a(2,"Password must be at least 8 characters."),s()())}function D(e,r){e&1&&(i(0,"div",12)(1,"div"),a(2,"Passwords do not match."),s()())}function z(e,r){if(e&1&&(i(0,"div",15),a(1),s()),e&2){let o=h();n(),x(" ",o.serverErrorMsg," ")}}function H(e,r){if(e&1&&(i(0,"div",16),a(1),s()),e&2){let o=h();n(),x(" ",o.successMsg," ")}}function q(e,r){e&1&&(f(),i(0,"svg",22),l(1,"circle",23)(2,"path",24),s(),w(),i(3,"span"),a(4,"Resetting..."),s())}function O(e,r){e&1&&(i(0,"span"),a(1,"Reset Password"),s())}var I=class e{_fb=u(A);_authService=u(N);_route=u(y);_router=u(S);showPassword=!1;token="";isLoading=!1;successMsg="";serverErrorMsg="";resetForm=this._fb.group({password:["",[g.required,g.minLength(8)]],confirmPassword:["",[g.required]]},{validators:this.passwordsMatch});ngOnInit(){this.token=this._route.snapshot.paramMap.get("token")||""}togglePasswordVisibility(){this.showPassword=!this.showPassword}passwordsMatch(r){let o=r.get("password")?.value,t=r.get("confirmPassword")?.value;return o===t?null:{mismatch:!0}}onSubmit(){if(this.resetForm.invalid)return;this.isLoading=!0;let r=this.resetForm.value.password;this._authService.resetPassService(r,this.token).subscribe({next:o=>{this.successMsg=o.message||"Password reset successfully!",this.isLoading=!1,setTimeout(()=>this._router.navigate(["/auth/login"]),3e3)},error:o=>{this.serverErrorMsg=o?.error?.message||"Failed to reset password.",this.isLoading=!1}})}static \u0275fac=function(o){return new(o||e)};static \u0275cmp=b({type:e,selectors:[["app-reset-password"]],decls:28,vars:10,consts:[[1,"flex","flex-col","lg:flex-row","text-[#2B1B12]",2,"height","calc(100vh - 88px)"],[1,"lg:flex","w-full","lg:w-1/2","hidden","bg-cover","bg-center","relative","items-center",2,"background-image","url('../../../../assets/Landing/hero_image.png')"],[1,"w-full","lg:w-1/2","flex","items-center","justify-center","px-6","sm:px-10","md:px-16"],[1,"w-full","max-w-md","py-10"],[1,"text-3xl","font-bold","mb-8","text-center"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"relative"],["for","password",1,"block","mb-2","text-[#6B5B4D]","text-sm","font-medium"],["id","password","formControlName","password","placeholder","Enter new password",1,"w-full","bg-transparent","border-b-2","border-[#B99F8A]","py-3","text-[#2B1B12]","placeholder:text-[#8C7A6B]","focus:outline-none","focus:border-[#2B1B12]",3,"type"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-5","h-5","absolute","right-2","top-11","text-gray-600","cursor-pointer",3,"click"],["stroke-linecap","round","stroke-linejoin","round","d","M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.374 7.24 19.5 12 19.5c4.76 0 8.774-3.126 10.066-7.5A10.45 10.45 0 0012 4.5c-1.732 0-3.368.41-4.82 1.138M3 3l18 18",4,"ngIf"],["stroke-linecap","round","stroke-linejoin","round","d","M2.458 12C3.732 7.64 7.374 4.5 12 4.5c4.626 0 8.268 3.14 9.542 7.5-1.274 4.36-4.916 7.5-9.542 7.5-4.626 0-8.268-3.14-9.542-7.5z",4,"ngIf"],[1,"text-red-600","text-sm","mt-1"],["for","confirmPassword",1,"block","mb-2","text-[#6B5B4D]","text-sm","font-medium"],["type","password","id","confirmPassword","formControlName","confirmPassword","placeholder","Confirm your password",1,"w-full","bg-transparent","border-b-2","border-[#B99F8A]","py-3","text-[#2B1B12]","placeholder:text-[#8C7A6B]","focus:outline-none","focus:border-[#2B1B12]"],[1,"text-red-600","text-center","mb-3","font-medium"],[1,"text-green-600","text-center","mb-3","font-medium"],["type","submit",1,"w-full","bg-[#2B1B12]","hover:bg-[#3B261A]","transition-all","text-white","font-semibold","py-3","rounded-lg","flex","justify-center","items-center","gap-2","disabled:opacity-50",3,"disabled"],[1,"mt-6","text-center","text-sm","text-[#4B4B4B]"],["routerLink","/auth/login",1,"text-[#2B1B12]","font-semibold","hover:underline"],["stroke-linecap","round","stroke-linejoin","round","d","M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.374 7.24 19.5 12 19.5c4.76 0 8.774-3.126 10.066-7.5A10.45 10.45 0 0012 4.5c-1.732 0-3.368.41-4.82 1.138M3 3l18 18"],["stroke-linecap","round","stroke-linejoin","round","d","M2.458 12C3.732 7.64 7.374 4.5 12 4.5c4.626 0 8.268 3.14 9.542 7.5-1.274 4.36-4.916 7.5-9.542 7.5-4.626 0-8.268-3.14-9.542-7.5z"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z",1,"opacity-75"]],template:function(o,t){if(o&1&&(i(0,"section",0),l(1,"div",1),i(2,"div",2)(3,"div",3)(4,"h2",4),a(5,"Reset Your Password"),s(),i(6,"form",5),v("ngSubmit",function(){return t.onSubmit()}),i(7,"div",6)(8,"label",7),a(9," New Password "),s(),l(10,"input",8),f(),i(11,"svg",9),v("click",function(){return t.togglePasswordVisibility()}),P(12,V,1,0,"path",10)(13,G,1,0,"path",11),s(),m(14,j,3,0,"div",12),s(),w(),i(15,"div",6)(16,"label",13),a(17," Confirm Password "),s(),l(18,"input",14),m(19,D,3,0,"div",12),s(),m(20,z,2,1,"div",15),m(21,H,2,1,"div",16),i(22,"button",17),m(23,q,5,0)(24,O,2,0,"span"),s()(),i(25,"div",18)(26,"a",19),a(27," Back to login "),s()()()()()),o&2){let d,_;n(6),p("formGroup",t.resetForm),n(4),p("type",t.showPassword?"text":"password"),n(2),p("ngIf",!t.showPassword),n(),p("ngIf",t.showPassword),n(),c((d=t.resetForm.get("password"))!=null&&d.touched&&((d=t.resetForm.get("password"))!=null&&d.invalid)?14:-1),n(5),c((_=t.resetForm.get("confirmPassword"))!=null&&_.touched&&(t.resetForm.errors!=null&&t.resetForm.errors.mismatch)?19:-1),n(),c(t.serverErrorMsg?20:-1),n(),c(t.successMsg&&!t.serverErrorMsg?21:-1),n(),p("disabled",t.resetForm.invalid||t.isLoading),n(),c(t.isLoading?23:24)}},dependencies:[L,R,M,k,E,F,T,B,C],encapsulation:2})};export{I as ResetPass};
