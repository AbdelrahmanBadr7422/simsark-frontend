import{a as T}from"./chunk-5WYRY4FN.js";import{a as C,b as c,c as B,d as S,e as L,g as E,h as y,l as F,m as M}from"./chunk-XOG22YQB.js";import"./chunk-XCEYEA5J.js";import{d as w,e as b}from"./chunk-74MSF4LX.js";import"./chunk-XHS7ECCB.js";import{$ as h,La as v,T as u,Wa as s,Ya as d,_ as x,bb as g,cb as i,db as n,eb as m,gb as _,hb as p,nb as o,pb as f,wa as r}from"./chunk-FJDYQ5PW.js";function N(e,a){e&1&&(i(0,"div"),o(1,"Email is required."),n())}function D(e,a){e&1&&(i(0,"div"),o(1,"Enter a valid email."),n())}function R(e,a){if(e&1&&(i(0,"div",9),s(1,N,2,0,"div"),s(2,D,2,0,"div"),n()),e&2){let t=p();r(),d(t.f.email.errors!=null&&t.f.email.errors.required?1:-1),r(),d(t.f.email.errors!=null&&t.f.email.errors.email?2:-1)}}function k(e,a){e&1&&(i(0,"div"),o(1,"Password is required."),n())}function q(e,a){e&1&&(i(0,"div"),o(1,"Minimum 6 characters."),n())}function G(e,a){if(e&1&&(i(0,"div",9),s(1,k,2,0,"div"),s(2,q,2,0,"div"),n()),e&2){let t=p();r(),d(t.f.password.errors!=null&&t.f.password.errors.required?1:-1),r(),d(t.f.password.errors!=null&&t.f.password.errors.minlength?2:-1)}}function I(e,a){if(e&1&&(i(0,"div",14),o(1),n()),e&2){let t=p();r(),f(" ",t.serverErrorMsg," ")}}function P(e,a){if(e&1&&(i(0,"div",15),o(1),n()),e&2){let t=p();r(),f(" ",t.loginStatusMsg," ")}}function V(e,a){e&1&&(x(),i(0,"svg",19),m(1,"circle",20)(2,"path",21),n(),h(),i(3,"span"),o(4,"Logging in..."),n())}function j(e,a){e&1&&(i(0,"span"),o(1,"Login"),n())}var A=class e{_authService=u(T);fb=u(F);router=u(w);loginForm;loginStatusMsg="";serverErrorMsg="";isLoading=!1;ngOnInit(){this.loginForm=this.fb.group({email:["",[c.required,c.email]],password:["",[c.required,c.minLength(8)]]})}get f(){return this.loginForm.controls}onSubmit(){if(this.loginForm.invalid){this.loginForm.markAllAsTouched(),this.loginStatusMsg="Please fill in all required fields.";return}this.isLoading=!0,this.serverErrorMsg="";let a=this.loginForm.value;this._authService.loginService(a).subscribe({next:t=>{this.isLoading=!1,this.loginStatusMsg=t.message;let l=t.data?.role;this.router.navigate(["/explore"])},error:t=>{this.isLoading=!1,this.serverErrorMsg=t.message||"Login failed. Please try again."}})}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=v({type:e,selectors:[["app-login"]],decls:29,vars:7,consts:[[1,"flex","flex-col","lg:flex-row","text-[#2B1B12]",2,"height","calc(100vh - 88px)"],[1,"lg:flex","w-full","lg:w-1/2","hidden","bg-cover","bg-center","relative","items-center",2,"background-image","url('../../../../assets/Landing/hero_image.png')"],[1,"w-full","lg:w-1/2","flex","items-center","justify-center","px-6","md:px-12"],[1,"w-full","max-w-md","py-10"],[1,"text-3xl","font-bold","mb-8","text-center"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"relative"],["type","email","id","email","formControlName","email","placeholder","",1,"peer","w-full","bg-transparent","border-b-2","border-[#B99F8A]","py-3","text-[#2B1B12]","placeholder-transparent","focus:outline-none","focus:border-[#2B1B12]"],["for","email",1,"absolute","left-0","top-3","text-[#6B5B4D]","text-sm","transition-all","duration-200","ease-in-out","peer-placeholder-shown:top-3","peer-placeholder-shown:text-base","peer-placeholder-shown:text-[#8C7A6B]","peer-focus:top-0","peer-focus:text-xs","peer-focus:text-[#2B1B12]","peer-not-placeholder-shown:top-0","peer-not-placeholder-shown:text-xs","peer-not-placeholder-shown:text-[#2B1B12]"],[1,"text-red-600","text-sm","mt-1"],["type","password","id","password","formControlName","password","placeholder","",1,"peer","w-full","bg-transparent","border-b-2","border-[#B99F8A]","py-3","text-[#2B1B12]","placeholder-transparent","focus:outline-none","focus:border-[#2B1B12]"],["for","password",1,"absolute","left-0","top-3","text-[#6B5B4D]","text-sm","transition-all","duration-200","ease-in-out","peer-placeholder-shown:top-3","peer-placeholder-shown:text-base","peer-placeholder-shown:text-[#8C7A6B]","peer-focus:top-0","peer-focus:text-xs","peer-focus:text-[#2B1B12]","peer-not-placeholder-shown:top-0","peer-not-placeholder-shown:text-xs","peer-not-placeholder-shown:text-[#2B1B12]"],[1,"text-right","mt-1"],["routerLink","/auth/forget-password",1,"text-sm","text-[#2B1B12]","hover:underline","font-semibold"],[1,"text-red-600","text-center","mb-3","font-medium"],[1,"text-green-600","text-center","mb-3","font-medium"],["type","submit",1,"w-full","bg-[#2B1B12]","hover:bg-[#3B261A]","transition-all","text-white","font-semibold","py-3","rounded-lg","flex","justify-center","items-center","gap-2","disabled:opacity-50",3,"disabled"],[1,"mt-6","text-center","text-sm","text-[#4B4B4B]"],["routerLink","/auth/register",1,"text-[#2B1B12]","font-semibold","hover:underline"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z",1,"opacity-75"]],template:function(t,l){t&1&&(i(0,"section",0),m(1,"div",1),i(2,"div",2)(3,"div",3)(4,"h2",4),o(5,"Login"),n(),i(6,"form",5),_("ngSubmit",function(){return l.onSubmit()}),i(7,"div",6),m(8,"input",7),i(9,"label",8),o(10," Email address "),n(),s(11,R,3,2,"div",9),n(),i(12,"div",6),m(13,"input",10),i(14,"label",11),o(15," Password "),n(),s(16,G,3,2,"div",9),n(),i(17,"div",12)(18,"a",13),o(19," Forgot Password? "),n()(),s(20,I,2,1,"div",14),s(21,P,2,1,"div",15),i(22,"button",16),s(23,V,5,0)(24,j,2,0,"span"),n()(),i(25,"div",17),o(26," Don't have an account? "),i(27,"a",18),o(28,"Register here"),n()()()()()),t&2&&(r(6),g("formGroup",l.loginForm),r(5),d(l.f.email.touched&&l.f.email.invalid?11:-1),r(5),d(l.f.password.touched&&l.f.password.invalid?16:-1),r(4),d(l.serverErrorMsg?20:-1),r(),d(l.loginStatusMsg&&!l.serverErrorMsg?21:-1),r(),g("disabled",l.loginForm.invalid||l.isLoading),r(),d(l.isLoading?23:24))},dependencies:[M,L,C,B,S,E,y,b],encapsulation:2})};export{A as Login};
