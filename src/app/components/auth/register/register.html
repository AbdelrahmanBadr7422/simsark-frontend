<section
  class="flex flex-col lg:flex-row text-[#2B1B12] bg-[#FFF5EE]"
  style="height: calc(100vh - 88px)"
>
  <div
    class="lg:flex w-full lg:w-1/2 hidden bg-cover bg-center relative items-center"
    style="background-image: url('../../../../assets/Landing/hero_image.png')"
  ></div>
  <div class="w-full lg:w-1/2 flex items-center justify-center px-6 md:px-12 bg-[#DCC8B9]">
    <div class="w-full max-w-md py-10">
      <h2 class="text-3xl font-bold mb-8 text-center">Create an Account</h2>

      <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="space-y-6">
        <div class="relative">
          <input
            type="email"
            id="email"
            formControlName="email"
            class="peer w-full bg-transparent border-b-2 border-[#B99F8A] py-3 text-[#2B1B12] placeholder-transparent focus:outline-none focus:border-[#2B1B12]"
            placeholder=""
          />
          <label
            for="email"
            class="absolute left-0 top-3 text-[#6B5B4D] text-sm transition-all duration-200 ease-in-out peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-placeholder-shown:text-[#8C7A6B] peer-focus:top-0 peer-focus:text-xs peer-focus:text-[#2B1B12] peer-not-placeholder-shown:top-0 peer-not-placeholder-shown:text-xs peer-not-placeholder-shown:text-[#2B1B12]"
          >
            Email address
          </label>
          @if(registerForm.get('email')?.touched && registerForm.get('email')?.invalid){
          <div class="text-red-600 text-sm mt-1">
            @if(registerForm.get('email')?.errors?.['required']){
            <div>Email is required.</div>
            } @if(registerForm.get('email')?.errors?.['email']){
            <div>Enter a valid email.</div>
            }
          </div>
          }
        </div>

        <div class="relative">
          <input
            type="password"
            id="password"
            formControlName="password"
            class="peer w-full bg-transparent border-b-2 border-[#B99F8A] py-3 text-[#2B1B12] placeholder-transparent focus:outline-none focus:border-[#2B1B12]"
            placeholder=""
          />
          <label
            for="password"
            class="absolute left-0 top-3 text-[#6B5B4D] text-sm transition-all duration-200 ease-in-out peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-placeholder-shown:text-[#8C7A6B] peer-focus:top-0 peer-focus:text-xs peer-focus:text-[#2B1B12] peer-not-placeholder-shown:top-0 peer-not-placeholder-shown:text-xs peer-not-placeholder-shown:text-[#2B1B12]"
          >
            Password
          </label>
          @if(registerForm.get('password')?.touched && registerForm.get('password')?.invalid){
          <div class="text-red-600 text-sm mt-1">
            @if(registerForm.get('password')?.errors?.['required']){
            <div>Password is required.</div>
            } @if(registerForm.get('password')?.errors?.['minlength']){
            <div>Minimum 8 characters.</div>
            }
          </div>
          }
        </div>

        <div class="relative">
          <input
            type="password"
            id="confirmPassword"
            formControlName="confirmPassword"
            class="peer w-full bg-transparent border-b-2 border-[#B99F8A] py-3 text-[#2B1B12] placeholder-transparent focus:outline-none focus:border-[#2B1B12]"
            placeholder=""
          />
          <label
            for="confirmPassword"
            class="absolute left-0 top-3 text-[#6B5B4D] text-sm transition-all duration-200 ease-in-out peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-placeholder-shown:text-[#8C7A6B] peer-focus:top-0 peer-focus:text-xs peer-focus:text-[#2B1B12] peer-not-placeholder-shown:top-0 peer-not-placeholder-shown:text-xs peer-not-placeholder-shown:text-[#2B1B12]"
          >
            Confirm Password
          </label>
          @if(registerForm.get('confirmPassword')?.touched &&
          (registerForm.get('confirmPassword')?.invalid ||
          registerForm.errors?.['passwordMismatch'])){
          <div class="text-red-600 text-sm mt-1">
            @if(registerForm.get('confirmPassword')?.errors?.['required']){
            <div>ConfirmPassword is required.</div>
            } @if(registerForm.errors?.['passwordMismatch']){
            <div>Passwords do not match.</div>
            }
          </div>
          }
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div class="relative">
            <input
              type="text"
              id="fname"
              formControlName="fname"
              class="peer w-full bg-transparent border-b-2 border-[#B99F8A] py-3 text-[#2B1B12] placeholder-transparent focus:outline-none focus:border-[#2B1B12]"
              placeholder=""
            />
            <label
              for="fname"
              class="absolute left-0 top-3 text-[#6B5B4D] text-sm transition-all duration-200 ease-in-out peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-placeholder-shown:text-[#8C7A6B] peer-focus:top-0 peer-focus:text-xs peer-focus:text-[#2B1B12] peer-not-placeholder-shown:top-0 peer-not-placeholder-shown:text-xs peer-not-placeholder-shown:text-[#2B1B12]"
            >
              First name
            </label>
            @if(registerForm.get('fname')?.touched && registerForm.get('fname')?.invalid){
            <div class="text-red-600 text-sm mt-1">
              @if(registerForm.get('fname')?.errors?.['required']){
              <div>Last name is required.</div>
              } @if(registerForm.get('fname')?.errors?.['minlength']){
              <div>Minimum 2 characters required.</div>
              }
            </div>
            }
          </div>

          <div class="relative">
            <input
              type="text"
              id="lname"
              formControlName="lname"
              class="peer w-full bg-transparent border-b-2 border-[#B99F8A] py-3 text-[#2B1B12] placeholder-transparent focus:outline-none focus:border-[#2B1B12]"
              placeholder=""
            />
            <label
              for="lname"
              class="absolute left-0 top-3 text-[#6B5B4D] text-sm transition-all duration-200 ease-in-out peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-placeholder-shown:text-[#8C7A6B] peer-focus:top-0 peer-focus:text-xs peer-focus:text-[#2B1B12] peer-not-placeholder-shown:top-0 peer-not-placeholder-shown:text-xs peer-not-placeholder-shown:text-[#2B1B12]"
            >
              Last name
            </label>
            @if(registerForm.get('lname')?.touched && registerForm.get('lname')?.invalid){
            <div class="text-red-600 text-sm mt-1">
              @if(registerForm.get('lname')?.errors?.['required']){
              <div>Last name is required.</div>
              } @if(registerForm.get('lname')?.errors?.['minlength']){
              <div>Minimum 2 characters required.</div>
              }
            </div>
            }
          </div>
        </div>

        <div class="relative">
          <label for="role" class="block mb-2 text-[#6B5B4D] text-sm">Select Role</label>
          <select
            id="role"
            formControlName="role"
            class="block w-full bg-transparent border-b-2 border-[#B99F8A] text-[#2B1B12] py-3 focus:outline-none focus:border-[#2B1B12]"
          >
            <option value="" disabled selected hidden>Select Role</option>
            <option value="seller">Seller</option>
            <option value="customer">Customer</option>
          </select>
        </div>
        @if(registerForm.get('role')?.touched && registerForm.get('role')?.invalid){
        <div class="text-red-600 text-sm mt-1">
          @if(registerForm.get('role')?.errors?.['required']){
          <div>Role is required.</div>
          } @if(registerForm.get('role')?.errors?.['RoleInvalid']){
          <div>Invalid role selected.</div>
          }
        </div>
        }

        <button
          type="submit"
          [disabled]="registerForm.invalid || isLoading"
          class="w-full bg-[#2B1B12] hover:bg-[#3b261a] transition-all text-white font-semibold py-3 rounded-lg disabled:opacity-50"
        >
          {{ isLoading ? 'Registering...' : 'Register' }}
        </button>

        @if(serverErrorMsg){
        <div class="text-red-600 text-center mt-2">
          {{ serverErrorMsg }}
        </div>
        } @if(registerStatusMsg && !serverErrorMsg){
        <div class="text-green-600 text-center mt-2">
          {{ registerStatusMsg }}
        </div>
        }
      </form>

      <div class="mt-6 text-center text-[#4A3B32] text-sm">
        Already have an account?
        <a routerLink="/auth/login" class="text-[#2B1B12] hover:underline font-semibold"
          >Login here</a
        >
      </div>
    </div>
  </div>
</section>
