<section class="flex justify-center mt-20 z-10 relative px-4">
  <div
    class="bg-[#DCC8B9] shadow-lg rounded-2xl w-full max-w-5xl p-4 md:p-6 flex flex-col md:flex-row items-center space-y-4 md:space-y-0 md:space-x-4">

    <input type="text" placeholder="Location"
      class="flex-1 w-full bg-white px-4 py-2 rounded-md border border-gray-300 outline-none focus:ring-2 focus:ring-[#2B1B12]"
      [value]="location()" (input)="location.set($event.target.value)" />

    <select
      class="flex-1 w-full bg-white px-4 py-2 rounded-md border border-gray-300 outline-none focus:ring-2 focus:ring-[#2B1B12]"
      [value]="propertyType()" #propType (change)="propertyType.set(propType.value)">
      <option value="" selected>Property Type</option>
      <option value="Apartment">Apartment</option>
      <option value="Villa">Villa</option>
      <option value="Studio">Studio</option>
      <option value="Land">Land</option>
    </select>

    <select
      class="flex-1 w-full bg-white px-4 py-2 rounded-md border border-gray-300 outline-none focus:ring-2 focus:ring-[#2B1B12]"
      [value]="priceRange()" #propPrice (change)="propertyType.set(propPrice.value)">
      <option value="">Price Range</option>
      <option value="0-1000">$0 - $1,000</option>
      <option value="1000-3000">$1,000 - $3,000</option>
      <option value="3000-5000">$3,000 - $5,000</option>
      <option value="5000+">$5,000+</option>
    </select>

    <button
      class="bg-white text-[#2B1B12] border border-[#2B1B12] font-medium px-4 py-2 rounded-md hover:bg-[#f1e8e3] transition duration-200 w-full md:w-auto"
      (click)="resetFilters()">
      Reset
    </button>
  </div>
</section>

<section class="container mx-auto px-4">
  <h2 class="text-[#2B1B12] font-extrabold text-2xl md:text-3xl text-center my-10 border-b pb-6 border-[#8C7A6B]">
    Explore Properties
  </h2>

  @if (filteredPosts().length === 0) {
  <p class="text-center text-gray-500 text-lg my-10">No matching properties found.</p>
  } @else {
  <div class="flex justify-evenly flex-wrap gap-4">
    @for (post of filteredPosts(); track post._id) {
    <a [routerLink]="['/post', post._id]"
      class="w-full max-w-sm bg-[#8C7A6B] hover:bg-[#7b6d5e] text-white rounded-lg shadow-md overflow-hidden transition-transform hover:scale-105 duration-300">

      <img src="assets/background.jpg" alt="Property Image" class="h-40 w-full object-cover">

      <div class="p-4 space-y-2 text-left">
        <h3 class="text-xl font-semibold truncate">{{ post.title }}</h3>
        <p class="text-indigo-200 text-sm">Type: {{ post.propertyType }}</p>
        <p class="text-indigo-200 text-sm">{{ post.area }} m² · {{ post.rooms }} rooms · {{ post.bathrooms }} baths</p>
        <p class="text-indigo-100 text-sm font-medium">Price: ${{ post.price }}</p>
      </div>
    </a>
    }
  </div>
  }
</section>
